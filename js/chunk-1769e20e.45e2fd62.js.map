{"version":3,"sources":["webpack:///./src/components/Input.vue?e994","webpack:///./src/components/Input.vue?2397","webpack:///src/components/Input.vue","webpack:///./src/components/Input.vue?dad3","webpack:///./src/components/Input.vue","webpack:///./src/views/memorials/story/steps/Auth.vue?bd62","webpack:///./src/views/memorials/story/steps/Create.vue?c86c","webpack:///./src/components/Select.vue?6d74","webpack:///src/components/Select.vue","webpack:///./src/components/Select.vue?a061","webpack:///./src/components/Select.vue","webpack:///./node_modules/core-js/modules/es.string.match.js","webpack:///./src/views/memorials/story/Index.vue?e10a","webpack:///./src/views/memorials/story/steps/Auth.vue?5185","webpack:///./src/utils/FacebookHelper.js","webpack:///src/views/memorials/story/steps/Auth.vue","webpack:///./src/views/memorials/story/steps/Auth.vue?6181","webpack:///./src/views/memorials/story/steps/Auth.vue","webpack:///./src/views/memorials/story/steps/Create.vue?c501","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///src/views/memorials/story/steps/Create.vue","webpack:///./src/views/memorials/story/steps/Create.vue?343c","webpack:///./src/views/memorials/story/steps/Create.vue","webpack:///./src/views/memorials/story/steps/Share.vue?f0a1","webpack:///src/views/memorials/story/steps/Share.vue","webpack:///./src/views/memorials/story/steps/Share.vue?c385","webpack:///./src/views/memorials/story/steps/Share.vue","webpack:///src/views/memorials/story/Index.vue","webpack:///./src/views/memorials/story/Index.vue?ca85","webpack:///./src/views/memorials/story/Index.vue","webpack:///./src/assets/img/icon/facebook-messenger-1.svg","webpack:///./src/assets/img/icon/envelope-blue.svg","webpack:///./src/utils/YouTubeHelper.js","webpack:///./src/assets/img/icon/form-photo.svg","webpack:///./src/assets/img/icon/form-paper.svg","webpack:///./src/views/memorials/story/Index.vue?e96c","webpack:///./src/assets/img/icon/facebook.svg","webpack:///./src/assets/img/icon/whatsapp.svg","webpack:///./src/components/Select.vue?f952","webpack:///./src/views/memorials/story/steps/Share.vue?2ef8"],"names":["render","_vm","this","_h","$createElement","_c","_self","class","invalid","concat","classList","staticClass","_v","_s","label","_e","ref","attrs","readOnly","domProps","inputVal","on","$event","$emit","target","value","emitBlur","isFocus","errorLabel","length","preventDefault","stopPropagation","clearInput","staticRenderFns","name","props","type","Array","default","String","Boolean","data","showClear","methods","$refs","focus","component","directives","rawName","expression","customClasses","isActive","isInvalid","_t","selectedItem","placeholder","isReadOnly","composing","$set","setText","items","_l","item","key","selectItem","defaultItem","Object","Number","event","assign","onClickOutside","formatItems","i","$ml","get","labelCode","mounted","bus","$on","newLanguage","_this","fixRegExpWellKnownSymbolLogic","anObject","toLength","requireObjectCoercible","advanceStringIndex","regExpExec","MATCH","nativeMatch","maybeCallNative","regexp","O","matcher","undefined","call","RegExp","res","done","rx","S","global","fullUnicode","unicode","lastIndex","result","A","n","matchStr","step","tag","changeStep","relativeUsers","goToMemorial","with","memorial","isUpdateName","users","user","isNameValid","setName","setNameFromText","relations","relation","setRelation","isRelationValid","setRelationFromText","showUploadModal","logInWithFacebook","uploadPhoto","photo","status","url","includes","removePhoto","formDisabled","login","slot","loadFacebookSDK","document","getElementById","fbDiv","createElement","id","body","appendChild","d","script","async","src","process","VUE_APP_FB_VERSION","VUE_APP_FB_APP_ID","VUE_APP_FB_REDIRECT_URL","getElementsByTagName","components","Select","Button","Input","showRelationInput","isShowUploadModal","validationRules","min","max","file","validate","$store","dispatch","field","formatRelations","keys","map","saveFacebookData","$router","push","params","slug","$route","hideUploadModal","watch","handler","immediate","computed","periods","period","closePeriodModal","setPeriod","back","isFilled","isTooltipShow","showPeriodModal","isGeneral","isRecorded","startRecordAudio","setDescription","model","callback","$$v","description","isDrop","dropAreaHighlight","dropAreaUnHighlight","handleDrop","isLink","link","addLink","loadMedia","isSubmitDisable","createStory","_arrayLikeToArray","arr","len","arr2","_arrayWithoutHoles","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","from","_unsupportedIterableToArray","o","minLen","prototype","toString","slice","constructor","test","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","AudioPlayer","PeriodModal","Tooltip","files","links","errorFilesIndex","isCreating","mediaRecorder","stream","storyType","isLoggedIn","getters","isMobile","check","audioStop","audioStart","recordAudio","stop","navigator","mediaDevices","getUserMedia","innerHTML","replace","trim","getFileType","saveFile","getLastFileByType","index","loadFile","displayMedia","oFReader","readAsDataURL","lastFile","$el","onloadend","oFREvent","insertAdjacentHTML","propsData","sources","instance","$mount","$audioEl","removeHandler","splice","parentElement","remove","add","onResize","height","checkError","uploaded","processed","error","beforeDestroy","removeEventListener","saveText","form","text","copyLink","fbShareUrl","shareToMessenger","encodeURIComponent","shareText","goTo","window","open","innerText","href","clipboard","writeText","getAttribute","Auth","Create","Share","Sidebar","HelpCenter","count","module","exports","isYouTubeLink","regExp","match","parseVideoId"],"mappings":"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","file":"js/chunk-1769e20e.45e2fd62.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Input.vue?vue&type=style&index=0&id=58b0170b&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['custom-input', {'invalid': _vm.invalid} ].concat( _vm.classList)},[(_vm.label)?_c('span',{staticClass:\"label\"},[_vm._v(_vm._s(_vm.label))]):_vm._e(),_c('input',{ref:\"input\",attrs:{\"readonly\":_vm.readOnly},domProps:{\"value\":_vm.inputVal},on:{\"input\":function($event){return _vm.$emit('update:inputVal', $event.target.value)},\"blur\":_vm.emitBlur,\"focus\":function($event){_vm.isFocus = true}}}),(_vm.invalid)?_c('div',{staticClass:\"custom-input__error\"},[(!_vm.isFocus)?_c('span',{staticClass:\"icon icon__error error-icon\"}):_vm._e(),_c('span',[_vm._v(_vm._s(_vm.errorLabel))])]):_vm._e(),(_vm.inputVal.length > 0)?_c('span',{staticClass:\"icon icon__clear clear\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.clearInput($event)}}}):_vm._e(),(_vm.invalid && _vm.inputVal.length === 0 && _vm.isFocus)?_c('span',{staticClass:\"icon icon__error error\"}):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n      :class=\"['custom-input', {'invalid': invalid}, ...classList]\"\r\n  >\r\n    <span class=\"label\" v-if=\"label\">{{ label }}</span>\r\n\r\n    <input\r\n        :value=\"inputVal\"\r\n        ref=\"input\"\r\n        @input=\"$emit('update:inputVal', $event.target.value)\"\r\n        @blur=\"emitBlur\"\r\n        @focus=\"isFocus = true\"\r\n        :readonly=\"readOnly\"\r\n    />\r\n\r\n    <div v-if=\"invalid\" class=\"custom-input__error\">\r\n      <span class=\"icon icon__error error-icon\" v-if=\"!isFocus\"></span>\r\n      <span>{{ errorLabel }}</span>\r\n    </div>\r\n\r\n    <span\r\n        class=\"icon icon__clear clear\"\r\n        @click.prevent.stop=\"clearInput\"\r\n        v-if=\"inputVal.length > 0\"\r\n    ></span>\r\n\r\n    <span class=\"icon icon__error error\" v-if=\"invalid && inputVal.length === 0 && isFocus\"></span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Input\",\r\n  props: {\r\n    classList: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    inputVal: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    label: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    invalid: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    errorLabel: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    readOnly: {\r\n      type: Boolean,\r\n      default: false,\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      showClear: false,\r\n      isFocus: false,\r\n    };\r\n  },\r\n  methods: {\r\n    clearInput() {\r\n      this.$emit('update:inputVal', '')\r\n      this.$refs['input'].focus();\r\n    },\r\n    emitBlur() {\r\n      this.isFocus = false;\r\n      this.$emit('blur');\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  @import \"~@/assets/scss/utils/vars.scss\";\r\n  @import \"~@/assets/scss/components/input.scss\";\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Input.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Input.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Input.vue?vue&type=template&id=58b0170b&scoped=true&\"\nimport script from \"./Input.vue?vue&type=script&lang=js&\"\nexport * from \"./Input.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Input.vue?vue&type=style&index=0&id=58b0170b&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"58b0170b\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auth.vue?vue&type=style&index=0&id=2924b346&scoped=true&lang=scss&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.onClickOutside),expression:\"onClickOutside\"}],class:['select' ].concat( _vm.customClasses, [{'open': _vm.isActive}], [{'invalid': _vm.isInvalid}])},[_c('div',{staticClass:\"select__backdrop\",on:{\"click\":function($event){_vm.isActive = false}}}),_c('div',{class:['select__input']},[_vm._t(\"icon\"),_c('span',{class:['select__label', {'open': _vm.isActive || null !== _vm.selectedItem.label && _vm.selectedItem.label.length > 0 }]},[_vm._v(_vm._s(_vm.label))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedItem.label),expression:\"selectedItem.label\"}],class:['select', 'select__value', {'filled':  null !== _vm.selectedItem.label && _vm.selectedItem.label.length > 0}],attrs:{\"placeholder\":_vm.placeholder,\"readonly\":_vm.isReadOnly},domProps:{\"value\":(_vm.selectedItem.label)},on:{\"focus\":function($event){_vm.isActive = true},\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.selectedItem, \"label\", $event.target.value)},_vm.setText],\"blur\":function($event){return _vm.$emit('blur')}}}),_c('div',{staticClass:\"select__arrow\",on:{\"click\":function($event){$event.preventDefault();_vm.isActive = !_vm.isActive}}},[_vm._t(\"arrow\",[_c('span',{class:['icon', {'icon-up': _vm.isActive, 'icon-down': !_vm.isActive}]})])],2)],2),(_vm.items.length > 0)?_c('div',{staticClass:\"select__dropdown\"},[_c('ul',{staticClass:\"select__list\"},_vm._l((_vm.items),function(item,key){return _c('li',{key:item.value,class:['select__item', {'selected': item.value === _vm.selectedItem.value}],attrs:{\"data-value\":item.value},on:{\"click\":function($event){$event.preventDefault();return _vm.selectItem(item)}}},[_vm._v(_vm._s(item.label))])}),0)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div :class=\"['select', ...customClasses, {'open': isActive}, {'invalid': isInvalid}]\" v-click-outside=\"onClickOutside\">\r\n    <div class=\"select__backdrop\" @click=\"isActive = false\"></div>\r\n    <div :class=\"['select__input']\">\r\n      <slot name=\"icon\"></slot>\r\n      <span :class=\"['select__label', {'open': isActive || null !== selectedItem.label && selectedItem.label.length > 0 }]\">{{ label }}</span>\r\n      <input\r\n        :class=\"['select', 'select__value', {'filled':  null !== selectedItem.label && selectedItem.label.length > 0}]\"\r\n        v-model=\"selectedItem.label\"\r\n        @focus=\"isActive = true\"\r\n        :placeholder=\"placeholder\"\r\n        :readonly=\"isReadOnly\"\r\n        @input=\"setText\"\r\n        @blur=\"$emit('blur')\"\r\n      >\r\n      <div class=\"select__arrow\" @click.prevent=\"isActive = !isActive\">\r\n        <slot name=\"arrow\"><span :class=\"['icon', {'icon-up': isActive, 'icon-down': !isActive}]\"></span></slot>\r\n      </div>\r\n    </div>\r\n    <div class=\"select__dropdown\" v-if=\"items.length > 0\">\r\n      <ul class=\"select__list\">\r\n        <li\r\n          v-for=\"(item, key) in items\"\r\n          :key=\"item.value\"\r\n          :class=\"['select__item', {'selected': item.value === selectedItem.value}]\"\r\n          :data-value=\"item.value\"\r\n          @click.prevent=\"selectItem(item)\"\r\n        >{{ item.label }}</li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Select\",\r\n  props: {\r\n    defaultItem: [Object, String, Number],\r\n    items: {\r\n      type: [Array, Object],\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    label: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    isInvalid: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    isReadOnly: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    customClasses: {\r\n      type: [Array, String],\r\n      default: '',\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      selectedItem: {\r\n        value: null,\r\n        label: null,\r\n      },\r\n      isActive: false,\r\n    };\r\n  },\r\n  methods: {\r\n    setText(event) {\r\n      if(!this.isReadOnly) {\r\n        this.$emit('inputText', event.target.value);\r\n      }\r\n    },\r\n    selectItem(item) {\r\n      this.isActive = false;\r\n      this.selectedItem = Object.assign({}, item);\r\n\r\n      this.$emit('selected', this.selectedItem);\r\n    },\r\n    onClickOutside() {\r\n      this.isActive = false;\r\n    },\r\n    formatItems() {\r\n      for(let i = 0; i < this.items.length; i++) {\r\n        if(this.items[i].labelCode) {\r\n          this.items[i].label = this.$ml.get(this.items[i].labelCode);\r\n        }\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.formatItems();\r\n\r\n    let bus = this.$ml.bus;\r\n    let _this = this;\r\n\r\n    bus.$on('vueml-language-changed', function (newLanguage) {\r\n      _this.formatItems();\r\n    });\r\n\r\n    if (this.defaultItem) {\r\n      if(typeof this.defaultItem === 'object') {\r\n        let item = this.items.find(item => item.value === this.defaultItem);\r\n        if (item) {\r\n          this.selectedItem = item;\r\n        }\r\n      } else if(typeof this.defaultItem === 'string') {\r\n        this.selectedItem.label = this.defaultItem;\r\n        this.selectedItem.value = this.defaultItem;\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  @import \"~@/assets/scss/components/select.scss\";\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Select.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Select.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Select.vue?vue&type=template&id=1a3a35ae&scoped=true&\"\nimport script from \"./Select.vue?vue&type=script&lang=js&\"\nexport * from \"./Select.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Select.vue?vue&type=style&index=0&id=1a3a35ae&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a3a35ae\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar toLength = require('../internals/to-length');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@match logic\nfixRegExpWellKnownSymbolLogic('match', 1, function (MATCH, nativeMatch, maybeCallNative) {\n  return [\n    // `String.prototype.match` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.match\n    function match(regexp) {\n      var O = requireObjectCoercible(this);\n      var matcher = regexp == undefined ? undefined : regexp[MATCH];\n      return matcher !== undefined ? matcher.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));\n    },\n    // `RegExp.prototype[@@match]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@match\n    function (regexp) {\n      var res = maybeCallNative(nativeMatch, regexp, this);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      if (!rx.global) return regExpExec(rx, S);\n\n      var fullUnicode = rx.unicode;\n      rx.lastIndex = 0;\n      var A = [];\n      var n = 0;\n      var result;\n      while ((result = regExpExec(rx, S)) !== null) {\n        var matchStr = String(result[0]);\n        A[n] = matchStr;\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n        n++;\n      }\n      return n === 0 ? null : A;\n    }\n  ];\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"story\"},[_c(_vm.step,{tag:\"component\",on:{\"changeStep\":_vm.changeStep}}),_c('Sidebar',{attrs:{\"relativeUsers\":_vm.relativeUsers,\"step\":_vm.step}}),_c('HelpCenter')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"story__content\"},[_c('header',{staticClass:\"auth\"},[_c('Button',{attrs:{\"classList\":['btn', 'btn__primary-2', 'story__back-memorial'],\"label\":_vm.$ml.get('story.header.toMemorialBtn')},on:{\"clicked\":_vm.goToMemorial}}),_c('router-link',{attrs:{\"to\":{ name: 'home' }}},[_c('img',{staticClass:\"story__logo\",attrs:{\"src\":require(\"@/assets/img/icon/welcome-screen-logo.svg\"),\"alt\":\"Logo\"}})])],1),_c('div',{staticClass:\"story__label\"},[_vm._v(\" \"+_vm._s(_vm.$ml.with('name', _vm.memorial.name).get('story.auth.label'))+\" \")]),_c('div',{staticClass:\"story__form\"},[_c('form',{staticClass:\"form\"},[_c('h5',{staticClass:\"form__label\"},[_vm._v(_vm._s(_vm.$ml.get('story.auth.form.label')))]),_c('div',{staticClass:\"form__group user\"},[_c('Select',{key:_vm.isUpdateName,attrs:{\"placeholder\":_vm.$ml.get('story.auth.form.users.placeholder'),\"label\":_vm.$ml.get('story.auth.form.users.label'),\"items\":_vm.users,\"defaultItem\":_vm.user,\"isReadOnly\":false,\"isInvalid\":!_vm.isNameValid},on:{\"selected\":_vm.setName,\"inputText\":_vm.setNameFromText}})],1),_c('div',{staticClass:\"form__group\"},[_c('Select',{attrs:{\"placeholder\":_vm.$ml.get('story.auth.form.relations.placeholder'),\"label\":_vm.$ml.get('story.auth.form.relations.label'),\"items\":_vm.relations,\"defaultItem\":_vm.user.relation},on:{\"selected\":_vm.setRelation}}),(_vm.showRelationInput)?_c('Input',{class:['form__relation'],attrs:{\"label\":_vm.$ml.get('story.auth.form.relations.label'),\"inputVal\":_vm.relation,\"invalid\":!_vm.isRelationValid,\"errorLabel\":_vm.$ml.get('story.auth.validation.relation')},on:{\"update:inputVal\":function($event){_vm.relation=$event},\"update:input-val\":function($event){_vm.relation=$event},\"blur\":_vm.setRelationFromText}}):_vm._e()],1),_c('div',{staticClass:\"form__group\"},[_c('div',{staticClass:\"form__photo\",on:{\"click\":_vm.showUploadModal}},[(_vm.isShowUploadModal)?_c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.hideUploadModal),expression:\"hideUploadModal\"}],staticClass:\"context-menu form__photo-upload-modal\"},[_c('div',{staticClass:\"context-menu__items\"},[_c('div',{staticClass:\"context-menu__item\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.logInWithFacebook($event)}}},[_vm._v(\"Get Facebook photo\")]),_c('label',{staticClass:\"context-menu__item\",attrs:{\"for\":\"uploadPhoto\"}},[_vm._v(\" Upload \"),_c('input',{staticClass:\"input-hide\",attrs:{\"type\":\"file\",\"id\":\"uploadPhoto\"},on:{\"change\":_vm.uploadPhoto}})])])]):_vm._e(),_c('div',{staticClass:\"description\"},[_c('span',{staticClass:\"label\"},[_vm._v(_vm._s(_vm.$ml.get('story.auth.form.photo.label')))]),_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.$ml.get('story.auth.form.photo.text')))])]),(null !== _vm.user.photo && null !== _vm.user.photo.status && null !== _vm.user.photo.url && ['facebook', 'ready'].includes(_vm.user.photo.status))?_c('div',{staticClass:\"loaded-photo\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.removePhoto($event)}}},[_c('span',{staticClass:\"icon icon__close remove-photo\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.removePhoto($event)}}}),_c('img',{attrs:{\"src\":_vm.user.photo.url,\"alt\":\"photo\"}})]):_c('img',{attrs:{\"src\":require(\"@/assets/img/icon/form-photo.svg\"),\"alt\":\"photo\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.showUploadModal($event)}}})])]),_c('Button',{attrs:{\"classList\":['form__submit', 'btn', 'btn__primary', {'disabled': _vm.formDisabled}],\"label\":_vm.$ml.get('story.auth.form.submit')},on:{\"clicked\":_vm.login}},[_c('span',{staticClass:\"icon icon__arrow-2 disabled btn-arrow\",attrs:{\"slot\":\"icon-right\"},slot:\"icon-right\"})])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export async function loadFacebookSDK(document) {\r\n    if (!document.getElementById(\"fb-root\")) {\r\n        const fbDiv = document.createElement(\"div\");\r\n        fbDiv.id = \"fb-root\";\r\n        document.body.appendChild(fbDiv);\r\n\r\n        // inject sdk.js\r\n        (function(d, script) {\r\n            script = d.createElement(\"script\");\r\n            script.type = \"text/javascript\";\r\n            script.async = true;\r\n            script.src =\r\n                `https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v${process.env.VUE_APP_FB_VERSION}&appId=${process.env.VUE_APP_FB_APP_ID}&redirect_uri=${process.env.VUE_APP_FB_REDIRECT_URL}`;\r\n            d.getElementsByTagName(\"head\")[0].appendChild(script);\r\n        })(document);\r\n    }\r\n}","<template>\r\n  <div class=\"story__content\">\r\n      <header class=\"auth\">\r\n        <Button\r\n            :classList=\"['btn', 'btn__primary-2', 'story__back-memorial']\"\r\n            @clicked=\"goToMemorial\"\r\n            :label=\"$ml.get('story.header.toMemorialBtn')\"\r\n        />\r\n\r\n        <router-link :to=\"{ name: 'home' }\">\r\n          <img class=\"story__logo\" src=\"~@/assets/img/icon/welcome-screen-logo.svg\" alt=\"Logo\">\r\n        </router-link>\r\n      </header>\r\n\r\n      <div class=\"story__label\">\r\n        {{ $ml.with('name', memorial.name).get('story.auth.label') }}\r\n      </div>\r\n\r\n      <div class=\"story__form\">\r\n        <form class=\"form\">\r\n          <h5 class=\"form__label\">{{ $ml.get('story.auth.form.label') }}</h5>\r\n\r\n          <div class=\"form__group user\">\r\n            <Select\r\n                :placeholder=\"$ml.get('story.auth.form.users.placeholder')\"\r\n                :label=\"$ml.get('story.auth.form.users.label')\"\r\n                :items=\"users\"\r\n                :defaultItem=\"user\"\r\n                :isReadOnly=\"false\"\r\n                :key=\"isUpdateName\"\r\n                :isInvalid=\"!isNameValid\"\r\n                @selected=\"setName\"\r\n                @inputText=\"setNameFromText\"\r\n            />\r\n          </div>\r\n\r\n          <div class=\"form__group\">\r\n            <Select\r\n                :placeholder=\"$ml.get('story.auth.form.relations.placeholder')\"\r\n                :label=\"$ml.get('story.auth.form.relations.label')\"\r\n                :items=\"relations\"\r\n                :defaultItem=\"user.relation\"\r\n                @selected=\"setRelation\"\r\n            />\r\n\r\n            <Input\r\n                v-if=\"showRelationInput\"\r\n                :class=\"['form__relation']\"\r\n                :label=\"$ml.get('story.auth.form.relations.label')\"\r\n                :inputVal.sync=\"relation\"\r\n                :invalid=\"!isRelationValid\"\r\n                :errorLabel=\"$ml.get('story.auth.validation.relation')\"\r\n                @blur=\"setRelationFromText\"\r\n            />\r\n          </div>\r\n\r\n          <div class=\"form__group\">\r\n            <div class=\"form__photo\" @click=\"showUploadModal\">\r\n              <div\r\n                  class=\"context-menu form__photo-upload-modal\"\r\n                  v-click-outside=\"hideUploadModal\"\r\n                  v-if=\"isShowUploadModal\"\r\n              >\r\n                <div class=\"context-menu__items\">\r\n                  <div class=\"context-menu__item\" @click.prevent.stop=\"logInWithFacebook\">Get Facebook photo</div>\r\n                  <label for=\"uploadPhoto\" class=\"context-menu__item\">\r\n                    Upload\r\n                    <input type=\"file\" class=\"input-hide\" id=\"uploadPhoto\" @change=\"uploadPhoto\">\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"description\">\r\n                <span class=\"label\">{{ $ml.get('story.auth.form.photo.label') }}</span>\r\n                <span class=\"text\">{{ $ml.get('story.auth.form.photo.text') }}</span>\r\n              </div>\r\n\r\n<!--              <span class=\"icon icon__facebook facebook-icon\"></span>-->\r\n\r\n              <div\r\n                  class=\"loaded-photo\"\r\n                  v-if=\"null !== user.photo && null !== user.photo.status && null !== user.photo.url && ['facebook', 'ready'].includes(user.photo.status)\"\r\n                  @click.prevent.stop=\"removePhoto\"\r\n              >\r\n                <span class=\"icon icon__close remove-photo\" @click.prevent.stop=\"removePhoto\"></span>\r\n                <img\r\n                    :src=\"user.photo.url\"\r\n                    alt=\"photo\"\r\n                >\r\n              </div>\r\n\r\n              <img\r\n                  v-else\r\n                  src=\"~@/assets/img/icon/form-photo.svg\"\r\n                  alt=\"photo\"\r\n                  @click.prevent.stop=\"showUploadModal\"\r\n              >\r\n            </div>\r\n          </div>\r\n\r\n          <Button\r\n              :classList=\"['form__submit', 'btn', 'btn__primary', {'disabled': formDisabled}]\"\r\n              @clicked=\"login\"\r\n              :label=\"$ml.get('story.auth.form.submit')\"\r\n          >\r\n            <span slot=\"icon-right\" class=\"icon icon__arrow-2 disabled btn-arrow\"></span>\r\n          </Button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {mapGetters} from 'vuex';\r\nimport {loadFacebookSDK} from \"@/utils/FacebookHelper\";\r\n\r\nimport Select from '@/components/Select';\r\nimport Button from '@/components/Button';\r\nimport Input from \"@/components/Input\";\r\n\r\nexport default {\r\n  name: \"StoryAuthStep\",\r\n  components: {\r\n    Select,\r\n    Button,\r\n    Input,\r\n  },\r\n  data() {\r\n    return {\r\n      step: 'auth',\r\n      isUpdateName: false,\r\n      showRelationInput: false,\r\n      relations: [],\r\n      relation: '',\r\n      name: '',\r\n      isRelationValid: true,\r\n      isNameValid: true,\r\n      isShowUploadModal: false,\r\n\r\n      validationRules: {\r\n        name: {\r\n          min: 1,\r\n          max: 244,\r\n        },\r\n        relation: {\r\n          min: 1,\r\n          max: 244,\r\n        },\r\n      },\r\n\r\n      file: null,\r\n    };\r\n  },\r\n  methods: {\r\n    validate(field) {\r\n      let validateText = this[field].replace(/ /g, '');\r\n      let length = validateText.length;\r\n\r\n      this[`is${field[0].toUpperCase() + field.slice(1)}Valid`] = length >= this.validationRules[field].min && length <= this.validationRules[field].max;\r\n    },\r\n    setName(name) {\r\n      this.name = name.label;\r\n      this.validate('name');\r\n      this.$store.dispatch('story/saveField', {\r\n        field: 'name',\r\n        data: name.label,\r\n      });\r\n      if(typeof name.photo !== 'undefined') {\r\n        this.$store.dispatch('story/saveField', {\r\n          field: 'photo',\r\n          data: name.photo,\r\n        });\r\n      }\r\n    },\r\n    setNameFromText(name) {\r\n      this.name = name;\r\n      this.validate('name');\r\n\r\n      this.$store.dispatch('story/saveField', {\r\n        field: 'name',\r\n        data: name,\r\n      });\r\n    },\r\n    setRelation(relation) {\r\n      if(17 === parseInt(relation.value)) {\r\n        this.showRelationInput = true;\r\n        this.$store.dispatch('story/saveField', {\r\n          field: 'relation',\r\n          data: '',\r\n        });\r\n      } else {\r\n        this.showRelationInput = false;\r\n        this.relation = '';\r\n        this.$store.dispatch('story/saveField', {\r\n          field: 'relation',\r\n          data: relation.label,\r\n        });\r\n      }\r\n    },\r\n    setRelationFromText() {\r\n      this.validate('relation')\r\n\r\n      this.$store.dispatch('story/saveField', {\r\n        field: 'relation',\r\n        data: this.relation,\r\n      });\r\n    },\r\n    removePhoto() {\r\n      this.file = null;\r\n      this.$store.dispatch('story/saveField', {\r\n        field: 'photo',\r\n        data: {\r\n          id: null,\r\n          url: null,\r\n          status: null,\r\n        },\r\n      });\r\n    },\r\n    formatRelations() {\r\n      this.relations = Object.keys(this.relations).map(key => {\r\n        return {\r\n          value: key,\r\n          label: this.relations[key],\r\n        };\r\n      });\r\n    },\r\n\r\n    saveFacebookData(data) {\r\n      this.$store.dispatch('auth/facebook', data);\r\n      this.$store.dispatch('story/getFacebookData');\r\n    },\r\n\r\n    async logInWithFacebook() {\r\n      let _this = this;\r\n\r\n      if(typeof window.FB === 'undefined') {\r\n        await loadFacebookSDK(document);\r\n      }\r\n\r\n      window.FB.getLoginStatus(function(response) {\r\n        if (response.status === 'connected') {\r\n          _this.saveFacebookData(response.authResponse);\r\n        } else {\r\n          window.FB.login(function (response) {\r\n            if (response.authResponse) {\r\n              _this.saveFacebookData(response.authResponse);\r\n            } else {\r\n              // console.log(\"User cancelled login or did not fully authorize.\");\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      this.hideUploadModal();\r\n    },\r\n\r\n    async login() {\r\n      if(!this.formDisabled) {\r\n        if(null !== this.file) {\r\n          const fileData = {\r\n            file: this.file,\r\n            type: 'image',\r\n          };\r\n          const uploadResponse = await this.$store.dispatch('memorial/upload', fileData);\r\n          if(uploadResponse.status) {\r\n            await this.$store.dispatch('story/saveField', {\r\n              field: 'photo',\r\n              data: uploadResponse.data,\r\n            });\r\n          } else {\r\n            alert(uploadResponse.data);\r\n            await this.$store.dispatch('story/saveField', {\r\n              field: 'photo',\r\n              data: null,\r\n            });\r\n            return;\r\n          }\r\n        }\r\n\r\n        // const userData = await this.$store.getters['story/user'];\r\n\r\n        let profilePhotoId = null;\r\n        let externalPhotoLink = null;\r\n        if(null !== this.user && null !== this.user.photo) {\r\n          if(this.user.photo.id) {\r\n            externalPhotoLink = null;\r\n            profilePhotoId = this.user.photo.id;\r\n          } else {\r\n            profilePhotoId = null;\r\n            externalPhotoLink = this.user.photo.url;\r\n          }\r\n        }\r\n\r\n        const payload = {\r\n          memorialId: this.memorial.id,\r\n          data: {\r\n            relativeName: this.user.name,\r\n            externalPhotoLink: externalPhotoLink,\r\n            profilePhotoId: profilePhotoId,\r\n            relationToMemorialPerson: this.user.relation,\r\n          },\r\n        };\r\n\r\n        const response = this.$store.dispatch('auth/relativeLogin', payload);\r\n\r\n        let token = null;\r\n        response.then(resp => {\r\n          token = resp.data.token;\r\n          (async () => {\r\n            await this.$store.dispatch('auth/setToken', {data: resp.data, tokenType: 'relative'});\r\n          })();\r\n\r\n          if(token === this.$store.getters['auth/token']) {\r\n            this.$emit('changeStep', 'create');\r\n            this.$router.push({name: 'memorials.story.create'});\r\n          }\r\n        }).catch(error => {\r\n          //console.log(error.response)\r\n        });\r\n      }\r\n    },\r\n    goToMemorial() {\r\n      this.$router.push({\r\n        name: 'memorials.show',\r\n        params: {\r\n          slug: this.$route.params.slug,\r\n        }\r\n      })\r\n    },\r\n    showUploadModal() {\r\n      if(null === this.user.photo || typeof this.users.photo === 'undefined' || null === this.user.photo.url || this.user.photo.url.length === 0) {\r\n        this.isShowUploadModal = true;\r\n      }\r\n    },\r\n    hideUploadModal() {\r\n      this.isShowUploadModal = false;\r\n    },\r\n    async uploadPhoto(event) {\r\n      if (event.target.files[0]) {\r\n        this.file = event.target.files[0];\r\n        let link = URL.createObjectURL(event.target.files[0]);\r\n\r\n        await this.$store.dispatch('story/saveField', {\r\n          field: 'photo',\r\n          data: {\r\n            id: null,\r\n            url: link,\r\n            status: 'ready',\r\n          },\r\n        });\r\n      }\r\n\r\n      this.hideUploadModal();\r\n    },\r\n  },\r\n  watch: {\r\n    '$ml.current': {\r\n      handler: function (value) {\r\n        this.relations = this.$ml.get('create.memorial.step1.form.relations');\r\n        this.formatRelations();\r\n      },\r\n      immediate: true\r\n    },\r\n    user: {\r\n      handler: function (value) {\r\n        this.isUpdateName = !this.isUpdateName;\r\n      },\r\n      immediate: true\r\n    },\r\n    relation() {\r\n     this.setRelationFromText();\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      user: 'story/user',\r\n      users: 'story/users',\r\n      memorial: 'story/memorial',\r\n      relativeUsers: 'story/relativeUsers',\r\n      tokenType: 'auth/tokenType',\r\n    }),\r\n    formDisabled() {\r\n      return this.user.name === null || this.user.relation === null || (this.user.name.length < 1 || this.user.name.length > 244) || (this.user.relation.length < 1 || this.user.relation.length > 244)\r\n    },\r\n  },\r\n  async mounted() {\r\n    if ('customer' === this.tokenType) {\r\n      this.$emit('changeStep', 'create');\r\n      await this.$router.push({name: 'memorials.story.create'});\r\n      return;\r\n    }\r\n\r\n    await loadFacebookSDK(document);\r\n    await this.$store.dispatch('auth/getToken');\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  @import \"~@/assets/scss/pages/create-story.scss\";\r\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auth.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auth.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Auth.vue?vue&type=template&id=2924b346&scoped=true&\"\nimport script from \"./Auth.vue?vue&type=script&lang=js&\"\nexport * from \"./Auth.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Auth.vue?vue&type=style&index=0&id=2924b346&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2924b346\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"story__content\"},[(_vm.showPeriodModal)?_c('PeriodModal',{attrs:{\"memorialId\":_vm.memorial.id,\"periods\":_vm.periods,\"defaultPeriod\":_vm.period},on:{\"close\":_vm.closePeriodModal,\"selectPeriod\":_vm.setPeriod}}):_vm._e(),_c('header',{staticClass:\"create\"},[_c('Button',{attrs:{\"classList\":['btn', 'btn__primary-2', 'story__back'],\"label\":_vm.$ml.get('create.memorial.common.buttons.back')},on:{\"clicked\":_vm.back}},[_c('span',{staticClass:\"icon icon__arrow-3 btn-arrow\",attrs:{\"slot\":\"icon-left\"},slot:\"icon-left\"})]),_c('router-link',{attrs:{\"to\":{ name: 'home' }}},[_c('img',{staticClass:\"story__logo\",attrs:{\"src\":require(\"@/assets/img/icon/welcome-screen-logo.svg\"),\"alt\":\"Logo\"}})])],1),_c('div',{class:['story__label', 'create', {'filled': _vm.isFilled}]},[_vm._v(\" \"+_vm._s(_vm.$ml.with('name', _vm.memorial.name).get('story.create.label'))+\" \")]),_c('div',{staticClass:\"story-form create-story__form\"},[(this.isCreating)?_c('div',{staticClass:\"disable-form\"}):_vm._e(),_c('div',{staticClass:\"story-form__wrapper\"},[_c('div',{staticClass:\"story-form__header\"},[_c('div',{staticClass:\"story-form__avatar\"},[(null !== _vm.user.photo && typeof _vm.user.photo !== 'undefined' && _vm.user.photo.url)?_c('img',{attrs:{\"src\":_vm.user.photo.url,\"alt\":\"avatar\"}}):_c('img',{staticClass:\"placeholder\",attrs:{\"src\":require(\"@/assets/img/icon/dashboard-avatar-placeholder.svg\"),\"alt\":\"avatar\"}})]),_c('div',{staticClass:\"story-form__user\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.user.name))]),_c('span',{staticClass:\"relative\"},[_vm._v(_vm._s(_vm.user.relation))])])]),_c('div',{staticClass:\"story-form__content\"},[_c('div',{staticClass:\"story-form__associating\"},[_c('div',{staticClass:\"label\"},[_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.$ml.get('story.common.form.labels.associating')))]),_c('span',{staticClass:\"icon icon__info ask-icon\",on:{\"click\":function($event){_vm.isTooltipShow = !_vm.isTooltipShow}}})]),_c('div',{staticClass:\"dropdown-wrapper\",on:{\"click\":function($event){_vm.showPeriodModal = true}}},[_c('div',{staticClass:\"associating\"},[_c('span',{staticClass:\"icon icon__label-blue\"}),(Object.keys(_vm.period).length && !_vm.period.isGeneral)?_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.period.name))]):_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.$ml.get('story.common.form.labels.general')))]),_c('span',{staticClass:\"icon caret\"})])]),_c('span',{staticClass:\"story-form__label\"},[_vm._v(_vm._s(_vm.$ml.get('story.create.form.label')))])]),_c('div',{directives:[{name:\"resize\",rawName:\"v-resize\",value:(_vm.onResize),expression:\"onResize\"}],staticClass:\"story-form__text\"},[_c('span',{class:['record', {'active': _vm.isRecorded}],on:{\"click\":_vm.startRecordAudio}}),_c('div',{staticClass:\"story-form__description\",attrs:{\"contentEditable\":\"true\",\"inputmode\":\"text\",\"placeholder\":_vm.$ml.get('story.create.form.placeholder.description')},on:{\"input\":_vm.setDescription},model:{value:(_vm.description),callback:function ($$v) {_vm.description=$$v},expression:\"description\"}}),_c('div',{ref:\"media\",staticClass:\"story-form__media\"}),_c('div',{ref:\"dropArea\",class:['story-form__uploads', {'drop__area': _vm.isDrop}],on:{\"dragenter\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.dropAreaHighlight($event)},\"dragover\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.dropAreaHighlight($event)},\"dragleave\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.dropAreaUnHighlight($event)},\"drop\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.handleDrop($event)}}},[(_vm.isLink)?_c('div',{staticClass:\"create-story__link-wrapper\"},[_c('span',{staticClass:\"icon icon__close icon__close-blue close\",on:{\"click\":function($event){_vm.isLink = false}}}),_c('Input',{staticClass:\"create-story__link\",attrs:{\"label\":\"link\",\"inputVal\":_vm.link},on:{\"update:inputVal\":function($event){_vm.link=$event},\"update:input-val\":function($event){_vm.link=$event}}}),_c('Button',{attrs:{\"classList\":['btn', 'btn__primary-2', 'story__back-memorial'],\"label\":\"publish\"},on:{\"clicked\":_vm.addLink}})],1):_vm._e(),(_vm.isDrop)?_c('div',{staticClass:\"drop__label\"},[_c('span',{staticClass:\"label\"},[_vm._v(_vm._s(_vm.$ml.get('story.create.form.uploadFiles.dropArea.label')))]),_c('span',{staticClass:\"icon icon__plus plus-icon\"})]):(!_vm.isLink && !_vm.isDrop)?_c('span',{staticClass:\"upload__label\"},[_vm._v(\" \"+_vm._s(_vm.$ml.get('story.create.form.uploadFiles.label'))+\" \")]):_vm._e(),(!_vm.isLink && !_vm.isDrop)?_c('div',{staticClass:\"upload__options\",attrs:{\"dir\":\"ltr\"}},[_c('div',{staticClass:\"upload__option\",on:{\"click\":function($event){_vm.isLink = true}}},[_c('label',[_c('span',{staticClass:\"icon icon__link\"}),_c('span',{staticClass:\"description\"},[_vm._v(\" \"+_vm._s(_vm.$ml.get('story.create.form.uploadFiles.link'))+\" \")])])]),_c('div',{staticClass:\"upload__option\"},[_c('input',{staticClass:\"input-hide\",attrs:{\"type\":\"file\",\"id\":\"cameraInput\",\"accept\":\"image/*,video/*\",\"capture\":\"user\"},on:{\"change\":_vm.loadMedia}}),_c('label',{attrs:{\"for\":\"cameraInput\"}},[_c('span',{staticClass:\"icon icon__camera\"}),_c('span',{staticClass:\"description\"},[_vm._v(\" \"+_vm._s(_vm.$ml.get('story.create.form.uploadFiles.camera'))+\" \")])])]),_c('div',{staticClass:\"upload__option\"},[_c('input',{staticClass:\"input-hide\",attrs:{\"type\":\"file\",\"id\":\"imageInput\",\"accept\":\"image/*,video/*\"},on:{\"change\":_vm.loadMedia}}),_c('label',{attrs:{\"for\":\"imageInput\"}},[_c('span',{staticClass:\"icon icon__image\"}),_c('span',{staticClass:\"description\"},[_vm._v(\" \"+_vm._s(_vm.$ml.get('story.create.form.uploadFiles.image'))+\" \")])])]),_c('div',{staticClass:\"upload__option\"},[_c('input',{staticClass:\"input-hide\",attrs:{\"type\":\"file\",\"id\":\"audioInput\",\"accept\":\"audio/*\"},on:{\"change\":_vm.loadMedia}}),_c('label',{attrs:{\"for\":\"audioInput\"}},[_c('span',{staticClass:\"icon icon__audio\"}),_c('span',{staticClass:\"description\"},[_vm._v(\" \"+_vm._s(_vm.$ml.get('story.create.form.uploadFiles.audio'))+\" \")])])])]):_vm._e()])])]),_c('div',{staticClass:\"story-form__footer create\"},[_c('Button',{attrs:{\"classList\":['form__submit', 'create', 'btn', 'btn__primary', {'disabled': _vm.isSubmitDisable}],\"label\":_vm.$ml.get('story.create.form.submit')},on:{\"clicked\":_vm.createStory}},[_c('span',{staticClass:\"icon icon__arrow-2 disabled btn-arrow\",attrs:{\"slot\":\"icon-right\"},slot:\"icon-right\"})])],1)])]),(_vm.isTooltipShow)?_c('Tooltip',{attrs:{\"label\":_vm.$ml.get('story.create.help.label'),\"withTalkLink\":false},on:{\"close\":function($event){_vm.isTooltipShow = false}}},[_c('div',{staticClass:\"tooltip__description\",attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('span',[_vm._v(\" \"+_vm._s(_vm.$ml.get('story.create.help.text'))+\" \")])])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","<template>\r\n  <div class=\"story__content\">\r\n    <PeriodModal\r\n        v-if=\"showPeriodModal\"\r\n        :memorialId=\"memorial.id\"\r\n        :periods=\"periods\"\r\n        :defaultPeriod=\"period\"\r\n        @close=\"closePeriodModal\"\r\n        @selectPeriod=\"setPeriod\"\r\n    />\r\n    <header class=\"create\">\r\n      <Button\r\n          :classList=\"['btn', 'btn__primary-2', 'story__back']\"\r\n          @clicked=\"back\"\r\n          :label=\"$ml.get('create.memorial.common.buttons.back')\"\r\n      >\r\n        <span slot=\"icon-left\" class=\"icon icon__arrow-3 btn-arrow\"></span>\r\n      </Button>\r\n\r\n      <router-link :to=\"{ name: 'home' }\">\r\n        <img class=\"story__logo\" src=\"~@/assets/img/icon/welcome-screen-logo.svg\" alt=\"Logo\">\r\n      </router-link>\r\n    </header>\r\n\r\n    <div :class=\"['story__label', 'create', {'filled': isFilled}]\">\r\n      {{ $ml.with('name', memorial.name).get('story.create.label') }}\r\n    </div>\r\n\r\n    <div class=\"story-form create-story__form\">\r\n      <div v-if=\"this.isCreating\" class=\"disable-form\"></div>\r\n      <div class=\"story-form__wrapper\">\r\n        <div class=\"story-form__header\">\r\n          <div class=\"story-form__avatar\">\r\n            <img v-if=\"null !== user.photo && typeof user.photo !== 'undefined' && user.photo.url\" :src=\"user.photo.url\" alt=\"avatar\">\r\n            <img class=\"placeholder\" v-else src=\"~@/assets/img/icon/dashboard-avatar-placeholder.svg\" alt=\"avatar\">\r\n          </div>\r\n\r\n          <div class=\"story-form__user\">\r\n            <span class=\"name\">{{ user.name }}</span>\r\n            <span class=\"relative\">{{ user.relation }}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"story-form__content\">\r\n          <div class=\"story-form__associating\">\r\n            <div class=\"label\">\r\n              <span class=\"text\">{{ $ml.get('story.common.form.labels.associating') }}</span>\r\n              <span class=\"icon icon__info ask-icon\" @click=\"isTooltipShow = !isTooltipShow\"></span>\r\n            </div>\r\n            <div class=\"dropdown-wrapper\" @click=\"showPeriodModal = true\">\r\n              <div class=\"associating\">\r\n                <span class=\"icon icon__label-blue\"></span>\r\n                <span class=\"text\" v-if=\"Object.keys(period).length && !period.isGeneral\">{{ period.name }}</span>\r\n                <span class=\"text\" v-else>{{ $ml.get('story.common.form.labels.general') }}</span>\r\n                <span class=\"icon caret\"></span>\r\n              </div>\r\n            </div>\r\n\r\n            <span class=\"story-form__label\">{{ $ml.get('story.create.form.label') }}</span>\r\n          </div>\r\n\r\n          <div class=\"story-form__text\" v-resize=\"onResize\">\r\n            <span\r\n                :class=\"['record', {'active': isRecorded}]\"\r\n                @click=\"startRecordAudio\"\r\n            ></span>\r\n            <div\r\n                class=\"story-form__description\"\r\n                contentEditable=\"true\"\r\n                inputmode=\"text\"\r\n                :placeholder=\"$ml.get('story.create.form.placeholder.description')\"\r\n                @input=\"setDescription\"\r\n                v-model=\"description\"\r\n            ></div>\r\n\r\n            <div class=\"story-form__media\" ref=\"media\"></div>\r\n\r\n            <div\r\n                :class=\"['story-form__uploads', {'drop__area': isDrop}]\"\r\n                ref=\"dropArea\"\r\n                @dragenter.prevent.stop=\"dropAreaHighlight\"\r\n                @dragover.prevent.stop=\"dropAreaHighlight\"\r\n                @dragleave.prevent.stop=\"dropAreaUnHighlight\"\r\n                @drop.prevent.stop=\"handleDrop\"\r\n            >\r\n\r\n              <div class=\"create-story__link-wrapper\" v-if=\"isLink\">\r\n                <span class=\"icon icon__close icon__close-blue close\" @click=\"isLink = false\"></span>\r\n\r\n                <Input\r\n                    class=\"create-story__link\"\r\n                    label=\"link\"\r\n                    :inputVal.sync=\"link\"\r\n                />\r\n\r\n                <Button\r\n                    :classList=\"['btn', 'btn__primary-2', 'story__back-memorial']\"\r\n                    @clicked=\"addLink\"\r\n                    label=\"publish\"\r\n                />\r\n              </div>\r\n\r\n\r\n              <div class=\"drop__label\" v-if=\"isDrop\">\r\n                <span class=\"label\">{{ $ml.get('story.create.form.uploadFiles.dropArea.label') }}</span>\r\n                <span class=\"icon icon__plus plus-icon\"></span>\r\n              </div>\r\n              <span class=\"upload__label\" v-else-if=\"!isLink && !isDrop\">\r\n                  {{ $ml.get('story.create.form.uploadFiles.label') }}\r\n                </span>\r\n\r\n              <div class=\"upload__options\" dir=\"ltr\" v-if=\"!isLink && !isDrop\">\r\n                <div class=\"upload__option\" @click=\"isLink = true\">\r\n                  <label>\r\n                    <span class=\"icon icon__link\"></span>\r\n                    <span class=\"description\">\r\n                        {{ $ml.get('story.create.form.uploadFiles.link') }}\r\n                      </span>\r\n                  </label>\r\n                </div>\r\n                <div class=\"upload__option\">\r\n                  <input type=\"file\" class=\"input-hide\" id=\"cameraInput\" accept=\"image/*,video/*\" capture=\"user\"\r\n                         @change=\"loadMedia\">\r\n                  <label for=\"cameraInput\">\r\n                    <span class=\"icon icon__camera\"></span>\r\n                    <span class=\"description\">\r\n                        {{ $ml.get('story.create.form.uploadFiles.camera') }}\r\n                      </span>\r\n                  </label>\r\n                </div>\r\n                <div class=\"upload__option\">\r\n                  <input type=\"file\" class=\"input-hide\" id=\"imageInput\" accept=\"image/*,video/*\" @change=\"loadMedia\">\r\n                  <label for=\"imageInput\">\r\n                    <span class=\"icon icon__image\"></span>\r\n                    <span class=\"description\">\r\n                          {{ $ml.get('story.create.form.uploadFiles.image') }}\r\n                      </span>\r\n                  </label>\r\n                </div>\r\n                <div class=\"upload__option\">\r\n                  <input type=\"file\" class=\"input-hide\" id=\"audioInput\" accept=\"audio/*\" @change=\"loadMedia\">\r\n                  <label for=\"audioInput\">\r\n                    <span class=\"icon icon__audio\"></span>\r\n                    <span class=\"description\">\r\n                         {{ $ml.get('story.create.form.uploadFiles.audio') }}\r\n                      </span>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"story-form__footer create\">\r\n          <Button\r\n              :classList=\"['form__submit', 'create', 'btn', 'btn__primary', {'disabled': isSubmitDisable}]\"\r\n              :label=\"$ml.get('story.create.form.submit')\"\r\n              @clicked=\"createStory\"\r\n          >\r\n            <span slot=\"icon-right\" class=\"icon icon__arrow-2 disabled btn-arrow\"></span>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <Tooltip\r\n        v-if=\"isTooltipShow\"\r\n        :label=\"$ml.get('story.create.help.label')\"\r\n        :withTalkLink=\"false\"\r\n        @close=\"isTooltipShow = false\"\r\n    >\r\n      <div slot=\"content\" class=\"tooltip__description\">\r\n        <span>\r\n           {{ $ml.get('story.create.help.text') }}\r\n        </span>\r\n      </div>\r\n    </Tooltip>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport Button from '@/components/Button';\r\nimport AudioPlayer from '@/components/AudioPlayer';\r\nimport Input from \"@/components/Input\";\r\nimport PeriodModal from \"@/components/PeriodModal\";\r\nimport Tooltip from \"@/components/Tooltip\";\r\nimport {mapGetters} from \"vuex\";\r\nimport { isYouTubeLink, parseVideoId } from '@/utils/YouTubeHelper';\r\n\r\nexport default {\r\n  name: \"StoryCreateStep\",\r\n  components: {\r\n    Input,\r\n    Button,\r\n    AudioPlayer,\r\n    PeriodModal,\r\n    Tooltip,\r\n  },\r\n  data() {\r\n    return {\r\n      isTooltipShow: false,\r\n      description: '',\r\n      files: {},\r\n      links: [],\r\n      period: {},\r\n\r\n      isLink: false,\r\n      isDrop: false,\r\n      event: null,\r\n      link: '',\r\n\r\n      showPeriodModal: false,\r\n      errorFilesIndex: [],\r\n      isFilled: false,\r\n      isCreating: false,\r\n\r\n      isRecorded: false,\r\n      mediaRecorder: null,\r\n      stream: null,\r\n\r\n      storyType: 'all',\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      memorial: 'story/memorial',\r\n      user: 'story/user',\r\n      periods: 'period/getPeriods',\r\n      tokenType: 'auth/tokenType',\r\n      customer: 'profile/getUser',\r\n    }),\r\n    isSubmitDisable() {\r\n      return this.isCreating || this.description.length === 0;\r\n    },\r\n    isLoggedIn() {\r\n      return this.$store.getters['auth/isLoggedIn'](['relative', 'customer']);\r\n    },\r\n    isMobile() {\r\n      let check = false;\r\n      (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);\r\n      return check;\r\n    },\r\n  },\r\n  watch: {\r\n    isLoggedIn: {\r\n      handler(value) {\r\n        if (!value) {\r\n          this.$router.push({name: 'memorials.story.auth', params: {slug: this.memorial.slug}})\r\n        }\r\n      },\r\n      immediate: true\r\n    },\r\n  },\r\n  methods: {\r\n    startRecordAudio(event) {\r\n      event.stopPropagation();\r\n      if(this.isRecorded) {\r\n        this.audioStop();\r\n      } else {\r\n        this.audioStart();\r\n      }\r\n    },\r\n    audioStart() {\r\n      this.recordAudio();\r\n    },\r\n    audioStop() {\r\n      this.mediaRecorder.stop();\r\n    },\r\n    recordAudio() {\r\n      let _this = this;\r\n      navigator.mediaDevices.getUserMedia({ audio: true})\r\n          .then(stream => {\r\n            this.mediaRecorder = new MediaRecorder(stream);\r\n\r\n            if(stream.getAudioTracks().length > 0) {\r\n              this.mediaRecorder.start();\r\n              _this.isRecorded = true;\r\n\r\n              let audioChunks = [];\r\n              this.mediaRecorder.addEventListener(\"dataavailable\",function(event) {\r\n                audioChunks.push(event.data);\r\n              });\r\n\r\n              this.mediaRecorder.addEventListener(\"stop\", function() {\r\n                _this.isRecorded = false;\r\n                stream.getTracks().forEach(track => track.stop());\r\n\r\n                const audioBlob = new Blob(audioChunks, {\r\n                  type: 'audio/wav'\r\n                });\r\n\r\n                _this.loadFile(audioBlob, 'audio');\r\n              });\r\n            }\r\n          });\r\n    },\r\n    async addLink() {\r\n      if (this.link.length === 0) {\r\n        return;\r\n      }\r\n\r\n      let isValid = this.link.match(/(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/g);\r\n      if (isValid === null) {\r\n        //todo: translate\r\n        alert('Invalid Link')\r\n        return;\r\n      }\r\n\r\n      this.links.push(this.link);\r\n      this.link = '';\r\n\r\n      const index = Object.keys(this.links)[Object.keys(this.links).length - 1];\r\n      let lastLink = this.links[index];\r\n\r\n      const isYouTube = isYouTubeLink(lastLink);\r\n      if(isYouTube) {\r\n        const youTubeVideoId = parseVideoId(lastLink);\r\n        this.$refs['media'].insertAdjacentHTML('beforeend', `\r\n            <div class=\"upload__item\">\r\n              <span class=\"icon icon__close remove\" data-type=\"link\" data-index=\"${index}\"></span>\r\n              <iframe\r\n                width=\"100%\" height=\"300px\"\r\n                src=\"https://www.youtube.com/embed/${youTubeVideoId}\"\r\n                frameborder=\"0\"\r\n                allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                allowfullscreen\r\n              ></iframe>\r\n            </div>\r\n        `);\r\n      } else {\r\n        let previewLink = await this.$store.dispatch('story/getPreviewLink', lastLink);\r\n\r\n        this.$refs['media'].insertAdjacentHTML('beforeend', `\r\n            <div class=\"upload__item\">\r\n                <div class=\"link__card\">\r\n                <img src=\"${previewLink}\" alt=\"\">\r\n                    <span class=\"icon icon__close remove\" data-type=\"link\" data-index=\"${index}\"></span>\r\n                    <div class=\"link__input\">\r\n                        <span class=\"icon icon__link link-icon\"></span>\r\n                        <input readonly type=\"text\" value=\"${lastLink}\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `);\r\n      }\r\n\r\n      this.isLink = false;\r\n    },\r\n    setDescription(event) {\r\n      this.description = event.target.innerHTML.replace(/(<([^>]+)>)/gi, ' ');\r\n      if ('<br>' === event.target.innerHTML.trim()) {\r\n        event.target.innerHTML = '';\r\n        this.description = '';\r\n      }\r\n    },\r\n    getFileType(file) {\r\n      if (typeof file !== 'undefined') {\r\n        if (file.type.includes('image')) {\r\n          return 'image';\r\n        }\r\n\r\n        if (file.type.includes('video')) {\r\n          return 'video';\r\n        }\r\n\r\n        if (file.type.includes('audio')) {\r\n          return 'audio';\r\n        }\r\n      }\r\n\r\n      return null;\r\n    },\r\n    saveFile(file, type) {\r\n      if (typeof this.files[type] === 'undefined') {\r\n        this.files[type] = [];\r\n      }\r\n\r\n      this.files[type].push(file);\r\n    },\r\n    getLastFileByType(type) {\r\n      const index = Object.keys(this.files[type])[Object.keys(this.files[type]).length - 1];\r\n      const file = this.files[type][index];\r\n\r\n      return {\r\n        file,\r\n        index,\r\n      }\r\n    },\r\n    loadFile(file, type) {\r\n      this.saveFile(file, type);\r\n\r\n      this.displayMedia(type);\r\n    },\r\n    loadMedia(event) {\r\n      if (!event.target.files.length) {\r\n        return;\r\n      }\r\n\r\n      let type = this.getFileType(event.target.files[0]);\r\n\r\n      if (null !== type) {\r\n        this.loadFile(event.target.files[0], type)\r\n      }\r\n\r\n      event.target.value = '';\r\n    },\r\n    displayMedia(type) {\r\n      const lastFile = this.getLastFileByType(type);\r\n\r\n      let _this = this;\r\n      const oFReader = new FileReader();\r\n      oFReader.readAsDataURL(lastFile.file);\r\n\r\n      if (['image', 'video'].includes(type)) {\r\n        let $el = '';\r\n\r\n        switch (type) {\r\n          case 'image':\r\n            $el = '<img src=\"{src}\"/>';\r\n            break;\r\n          case 'video':\r\n            $el = '<video preload=\"metadata\" muted controls src=\"{src}\"></video>';\r\n            break;\r\n        }\r\n\r\n        oFReader.onloadend = function (oFREvent) {\r\n          _this.$refs['media'].insertAdjacentHTML('beforeend', `\r\n            <div class=\"upload__item\">\r\n                <span class=\"icon icon__close remove\" data-type=\"${type}\" data-index=\"${lastFile.index}\"></span>\r\n                ${$el.replace('{src}', oFREvent.target.result)}\r\n            </div>\r\n        `);\r\n        };\r\n      }\r\n\r\n      if ('audio' === type) {\r\n        oFReader.onloadend = function (oFREvent) {\r\n          const AudioClass = Vue.extend(AudioPlayer)\r\n          const instance = new AudioClass({\r\n            propsData: {\r\n              sources: [\r\n                {\r\n                  file: oFREvent.target.result,\r\n                  type: lastFile.file.type,\r\n                },\r\n              ],\r\n              classList: [\r\n                'create-story__audio'\r\n              ],\r\n            }\r\n          })\r\n\r\n          _this.$refs['media'].insertAdjacentHTML('beforeend', `\r\n            <div class=\"upload__item\" id=\"audio-${lastFile.index}\">\r\n                <span class=\"icon icon__close remove\" data-type=\"${type}\" data-index=\"${lastFile.index}\"></span>\r\n\r\n            </div>\r\n        `);\r\n\r\n          instance.$mount();\r\n          const $audioEl = document.getElementById(`audio-${lastFile.index}`);\r\n          $audioEl.appendChild(instance.$el);\r\n        }\r\n      }\r\n    },\r\n    removeHandler(event) {\r\n      const {type, index} = event.target.dataset;\r\n      if (['image', 'video', 'audio'].includes(type)) {\r\n        this.files[type].splice(index, 1);\r\n        event.target.parentElement.remove();\r\n      }\r\n\r\n      if ('link' === type) {\r\n        this.links.splice(index, 1);\r\n        event.target.parentElement.remove();\r\n      }\r\n    },\r\n    dropAreaHighlight() {\r\n      this.$refs['dropArea'].classList.add('highlight');\r\n      this.isDrop = true;\r\n    },\r\n    dropAreaUnHighlight() {\r\n      this.$refs['dropArea'].classList.remove('highlight');\r\n      this.isDrop = false;\r\n    },\r\n    handleDrop(event) {\r\n      this.dropAreaUnHighlight();\r\n\r\n      let _this = this;\r\n\r\n      let dt = event.dataTransfer;\r\n      let files = dt.files;\r\n\r\n      ([...files]).forEach(file => {\r\n        let type = _this.getFileType(file);\r\n        this.loadFile(file, type);\r\n      });\r\n    },\r\n\r\n    closePeriodModal() {\r\n      this.showPeriodModal = false;\r\n    },\r\n    setPeriod(period) {\r\n      this.period = period;\r\n    },\r\n\r\n    async uploadsFiles() {\r\n      let files = {\r\n        'image': [],\r\n        'video': [],\r\n        'audio': [],\r\n      };\r\n\r\n      if (Object.keys(this.files).length > 0) {\r\n        for (let i = 0; i < Object.keys(this.files).length; i++) {\r\n          for (let j = 0; j < this.files[Object.keys(this.files)[i]].length; j++) {\r\n            const fileData = {\r\n              memorialId: this.memorial.id,\r\n              file: this.files[Object.keys(this.files)[i]][j],\r\n              type: Object.keys(this.files)[i],\r\n            };\r\n\r\n            await this.$store.dispatch('memorial/upload', fileData);\r\n\r\n            let uploadedFile = this.$store.getters['memorial/getFile'];\r\n            if (null !== uploadedFile) {\r\n              files[fileData.type].push(this.$store.getters['memorial/getFile']);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      return files;\r\n    },\r\n\r\n    async createStory() {\r\n      if (this.isSubmitDisable) {\r\n        return;\r\n      }\r\n      this.isCreating = true;\r\n\r\n      let payloadFiles = [];\r\n\r\n      const uploadedFiles = await this.uploadsFiles();\r\n\r\n      Object.keys(uploadedFiles).forEach(type => {\r\n        Object.keys(uploadedFiles[type]).forEach(itemIndex => {\r\n          payloadFiles.push({\r\n            id: uploadedFiles[type][itemIndex].id,\r\n            contentType: type,\r\n            description: ''\r\n          });\r\n        });\r\n      });\r\n\r\n      let payloadLinks = [];\r\n      this.links.forEach(link => {\r\n        payloadLinks.push({\r\n          link: link,\r\n          description: ''\r\n        });\r\n      });\r\n\r\n\r\n      if(this.periods.length === 0) {\r\n        await this.$store.dispatch('period/getPeriods', { id: this.memorial.id });\r\n      }\r\n\r\n      const generalPeriods = this.periods.filter(period => period.isGeneral === true);\r\n\r\n      const payload = {\r\n        periodId: Object.keys(this.period).length ? this.period.id : generalPeriods[0].id,\r\n        data: {\r\n          approvalRequested: true,\r\n          visible: this.isLoggedIn && 'customer' === this.tokenType,\r\n          description: this.description,\r\n          files: payloadFiles,\r\n          links: payloadLinks,\r\n        }\r\n      };\r\n\r\n      const response = await this.$store.dispatch('story/create', payload);\r\n\r\n      if (response) {\r\n        let error = 0;\r\n        error += this.checkError('image', uploadedFiles);\r\n        error += this.checkError('video', uploadedFiles);\r\n        error += this.checkError('audio', uploadedFiles);\r\n\r\n        if (error > 0) {\r\n          //todo: translate\r\n          alert('Not all files have been uploaded');\r\n        }\r\n\r\n        if ('customer' === this.tokenType) {\r\n          await this.$router.push({name: 'memorials.edit', params: {id: this.memorial.id}});\r\n        } else {\r\n          this.$emit('changeStep', 'share');\r\n          await this.$router.push({name: 'memorials.story.share'});\r\n        }\r\n      }\r\n      this.isCreating = false;\r\n    },\r\n    back() {\r\n      if(this.isLoggedIn && 'customer' === this.tokenType) {\r\n        this.$router.push({name: 'memorials.edit', params: {id: this.memorial.id}});\r\n      } else {\r\n        this.$emit('changeStep', 'auth');\r\n        this.$router.push({name: 'memorials.story.auth', params: {slug: this.$route.params.slug}});\r\n      }\r\n    },\r\n    onResize({width, height}) {\r\n      this.isFilled = height > 330;\r\n    },\r\n    checkError(field, uploadedFiles) {\r\n      let error = 0;\r\n      if (typeof this.files[field] !== 'undefined') {\r\n        let uploaded = this.files[field].length;\r\n        let processed = uploadedFiles[field].length;\r\n\r\n        if (uploaded !== processed) {\r\n          error++;\r\n        }\r\n      }\r\n\r\n      return error;\r\n    },\r\n  },\r\n  async mounted() {\r\n    this.$el.addEventListener('click', this.removeHandler);\r\n\r\n    if (this.$store.getters['auth/isLoggedIn'](['customer']) && 'customer' === this.tokenType) {\r\n      // this.storyType = 'life';\r\n      await this.$store.dispatch('profile/me');\r\n      await this.$store.dispatch('story/saveField', {\r\n        field: 'name',\r\n        data: this.customer.name,\r\n      });\r\n      await this.$store.dispatch('story/saveField', {\r\n        field: 'photo',\r\n        data: this.customer.profilePhoto,\r\n      });\r\n    }\r\n\r\n    if(typeof this.memorial === 'undefined' || null === this.memorial) {\r\n      await this.$store.dispatch('story/getMemorial', this.$route.params.slug);\r\n    }\r\n\r\n    await this.$store.dispatch('period/getPeriods', { id: this.memorial.id });\r\n\r\n    if(this.$route.params.period) {\r\n      this.period = this.periods.find(i => i.id == this.$route.params.period);\r\n    }\r\n  },\r\n  beforeDestroy: function () {\r\n    this.$el.removeEventListener('click', this.removeHandler);\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  @import \"~@/assets/scss/components/story-form.scss\";\r\n  @import \"~@/assets/scss/pages/create-story.scss\";\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Create.vue?vue&type=template&id=499c743d&\"\nimport script from \"./Create.vue?vue&type=script&lang=js&\"\nexport * from \"./Create.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Create.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"story__content\"},[_c('header',{staticClass:\"share\"},[_c('router-link',{attrs:{\"to\":{ name: 'home' }}},[_c('img',{staticClass:\"story__logo\",attrs:{\"src\":require(\"@/assets/img/icon/welcome-screen-logo.svg\"),\"alt\":\"Logo\"}})])],1),_c('div',{staticClass:\"story__label create\"},[_vm._v(\" \"+_vm._s(_vm.$ml.with('name', _vm.memorial.name).get('story.share.label'))+\" \")]),_c('div',{staticClass:\"create-memorial__form\"},[_c('div',{staticClass:\"create-memorial__form__wrapper share\"},[_c('div',{staticClass:\"create-memorial__form__wrapper__inputs share height\"},[_c('form',{staticClass:\"form\"},[_c('h5',{staticClass:\"form__title form__mb create-story__label\"},[_vm._v(\" \"+_vm._s(_vm.$ml.get('create.memorial.step2.form.title'))+\" \")]),_c('div',{staticClass:\"form__middle share-story__copy-btn\"},[_c('div',{staticClass:\"form__middle-descr\"},[_vm._v(_vm._s(_vm.$ml.get('create.memorial.step2.form.input.description'))+\" \")]),_c('div',{staticClass:\"form__middle-text\",attrs:{\"contenteditable\":\"true\"},on:{\"input\":_vm.saveText}},[_vm._v(\" \"+_vm._s(_vm.form.text)+\" \")]),_c('a',{ref:\"link\",staticClass:\"form__middle-link\",attrs:{\"href\":_vm.form.link}},[_vm._v(_vm._s(_vm.form.link))]),_c('Button',{attrs:{\"classList\":['btn', 'btn__primary-2', 'create-story__copy-btn'],\"label\":_vm.$ml.get('create.memorial.step2.form.buttons.copy')},on:{\"clicked\":_vm.copyLink}},[_c('img',{attrs:{\"slot\":\"icon-left\",\"src\":require(\"@/assets/img/icon/form-paper.svg\"),\"alt\":\"\"},slot:\"icon-left\"})])],1),_c('div',{staticClass:\"form__contact-icon\"},[_c('span',[_vm._v(_vm._s(_vm.$ml.get('create.memorial.step2.form.contacts.label')))]),_c('a',{staticClass:\"form__contact-item\",attrs:{\"target\":\"_blank\",\"href\":_vm.fbShareUrl}},[_c('img',{attrs:{\"src\":require(\"@/assets/img/icon/facebook.svg\"),\"alt\":\"\"}})]),_c('a',{staticClass:\"form__contact-item\",attrs:{\"target\":\"_blank\",\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.shareToMessenger()}}},[_c('img',{attrs:{\"src\":require(\"@/assets/img/icon/facebook-messenger-1.svg\"),\"alt\":\"\"}})]),_c('a',{staticClass:\"form__contact-item\",attrs:{\"target\":\"_blank\",\"href\":(\"whatsapp://send?text=\" + (encodeURIComponent(_vm.shareText + '\\n' + _vm.form.link))),\"data-action\":\"share/whatsapp/share\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/img/icon/whatsapp.svg\"),\"alt\":\"\"}})]),_c('a',{staticClass:\"form__contact-item\",attrs:{\"target\":\"_blank\",\"href\":(\"mailto:?body=\" + (encodeURIComponent(_vm.shareText + '\\n' + _vm.form.link)))}},[_c('img',{attrs:{\"src\":require(\"@/assets/img/icon/envelope-blue.svg\"),\"alt\":\"\"}})])])])]),_c('div',{staticClass:\"form__btn-wrapper share-story__btn-wrapper\"},[_c('Button',{attrs:{\"classList\":['btn', 'btn__primary', 'story-add'],\"label\":_vm.$ml.get('story.share.buttons.add')},on:{\"clicked\":function($event){return _vm.goTo('memorials.story.auth', {slug: _vm.$route.params.slug}, 'auth')}}},[_c('span',{staticClass:\"icon icon__plus icon__plus-white icon-add\",attrs:{\"slot\":\"icon-right\"},slot:\"icon-right\"})]),_c('Button',{attrs:{\"classList\":['btn', 'btn__second', 'story-btn'],\"label\":_vm.$ml.get('story.share.buttons.story')},on:{\"clicked\":_vm.goToMemorial}})],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"story__content\">\r\n    <header class=\"share\">\r\n      <router-link :to=\"{ name: 'home' }\">\r\n        <img class=\"story__logo\" src=\"~@/assets/img/icon/welcome-screen-logo.svg\" alt=\"Logo\">\r\n      </router-link>\r\n    </header>\r\n\r\n    <div class=\"story__label create\">\r\n      {{ $ml.with('name', memorial.name).get('story.share.label') }}\r\n    </div>\r\n\r\n    <div class=\"create-memorial__form\">\r\n      <div class=\"create-memorial__form__wrapper share\">\r\n\r\n        <div class=\"create-memorial__form__wrapper__inputs share height\">\r\n          <form class=\"form\">\r\n            <h5 class=\"form__title form__mb create-story__label\">\r\n              {{ $ml.get('create.memorial.step2.form.title') }}\r\n            </h5>\r\n\r\n            <div class=\"form__middle share-story__copy-btn\">\r\n              <div class=\"form__middle-descr\">{{\r\n                  $ml.get('create.memorial.step2.form.input.description') }}\r\n              </div>\r\n              <div class=\"form__middle-text\" @input=\"saveText\" contenteditable=\"true\">\r\n                {{ form.text }}\r\n              </div>\r\n              <a\r\n                  :href=\"form.link\"\r\n                  class=\"form__middle-link\"\r\n                  ref=\"link\"\r\n              >{{ form.link }}</a>\r\n\r\n              <Button\r\n                  :classList=\"['btn', 'btn__primary-2', 'create-story__copy-btn']\"\r\n                  :label=\"$ml.get('create.memorial.step2.form.buttons.copy')\"\r\n                  @clicked=\"copyLink\"\r\n              >\r\n                <img slot=\"icon-left\" src=\"~@/assets/img/icon/form-paper.svg\" alt=\"\">\r\n              </Button>\r\n            </div>\r\n\r\n            <div class=\"form__contact-icon\">\r\n              <span>{{ $ml.get('create.memorial.step2.form.contacts.label') }}</span>\r\n              <a\r\n                  target=\"_blank\"\r\n                  :href=\"fbShareUrl\"\r\n                  class=\"form__contact-item\"\r\n              >\r\n                <img src=\"~@/assets/img/icon/facebook.svg\" alt=\"\">\r\n              </a>\r\n              <a\r\n                  target=\"_blank\"\r\n                  class=\"form__contact-item\"\r\n                  href=\"#\"\r\n                  @click.prevent=\"shareToMessenger()\"\r\n              >\r\n                <img src=\"~@/assets/img/icon/facebook-messenger-1.svg\" alt=\"\">\r\n              </a>\r\n              <a\r\n                  target=\"_blank\"\r\n                  :href=\"`whatsapp://send?text=${encodeURIComponent(shareText + '\\n' + form.link)}`\"\r\n                  class=\"form__contact-item\"\r\n                  data-action=\"share/whatsapp/share\"\r\n              >\r\n                <img src=\"~@/assets/img/icon/whatsapp.svg\" alt=\"\">\r\n              </a>\r\n              <a\r\n                  target=\"_blank\"\r\n                  :href=\"`mailto:?body=${encodeURIComponent(shareText + '\\n' + form.link)}`\"\r\n                  class=\"form__contact-item\"\r\n              >\r\n                <img src=\"~@/assets/img/icon/envelope-blue.svg\" alt=\"\">\r\n              </a>\r\n            </div>\r\n\r\n          </form>\r\n        </div>\r\n        <div class=\"form__btn-wrapper share-story__btn-wrapper\">\r\n          <Button\r\n              :classList=\"['btn', 'btn__primary', 'story-add']\"\r\n              @clicked=\"goTo('memorials.story.auth', {slug: $route.params.slug}, 'auth')\"\r\n              :label=\"$ml.get('story.share.buttons.add')\"\r\n          >\r\n            <span slot=\"icon-right\" class=\"icon icon__plus icon__plus-white icon-add\"></span>\r\n          </Button>\r\n\r\n          <Button\r\n              :classList=\"['btn', 'btn__second', 'story-btn']\"\r\n              @clicked=\"goToMemorial\"\r\n              :label=\"$ml.get('story.share.buttons.story')\"\r\n          >\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapGetters} from \"vuex\";\r\nimport Button from '@/components/Button';\r\n\r\nexport default {\r\n  name: \"Share\",\r\n  components: {\r\n    Button,\r\n  },\r\n  data() {\r\n    return {\r\n      form: {\r\n        text: '',\r\n        link: ''\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters('story', {\r\n      isMemorialExist: 'isMemorialExist',\r\n      shareText: 'shareText',\r\n      memorial: 'memorial',\r\n    }),\r\n    fbShareUrl() {\r\n      let routeData = this.$router.resolve({name: 'memorials.story.share', params: {slug: this.memorial.slug}});\r\n\r\n      return `https://www.facebook.com/dialog/share?app_id=${process.env.VUE_APP_FB_APP_ID}&display=popup&href=${encodeURIComponent(this.form.link)}&quote=${encodeURIComponent(this.shareText)}&redirect_uri=${encodeURIComponent(window.location.origin + routeData.href)}`;\r\n    }\r\n  },\r\n  methods: {\r\n    shareToMessenger() {\r\n      let routeData = this.$router.resolve({name: 'memorials.story.share', params: {slug: this.memorial.slug}});\r\n      \r\n      let url = window.mobileCheck()\r\n          ? `fb-messenger://share?link=${encodeURIComponent(this.form.link)}`\r\n          : `https://www.facebook.com/dialog/send?app_id=${process.env.VUE_APP_FB_APP_ID}&display=popup&link=${encodeURIComponent(this.form.link)}&msg=${encodeURIComponent(this.shareText)}&redirect_uri=${encodeURIComponent(window.location.origin + routeData.href)}`\r\n\r\n      window.open(url, '_blank');\r\n    },\r\n    saveText(event) {\r\n      this.$store.dispatch('story/saveShareText', event.target.innerText);\r\n    },\r\n    copyLink() {\r\n      let link = this.$refs['link'];\r\n\r\n      if (null !== link && typeof link !== 'undefined') {\r\n        let href = link.getAttribute('href');\r\n\r\n        if (null !== href && typeof href !== 'undefined') {\r\n          navigator.clipboard.writeText(link.getAttribute('href'));\r\n        }\r\n      }\r\n    },\r\n    goTo(route, params = null, step = null) {\r\n      this.$router.push({name: route, params});\r\n\r\n      if(null !== step) {\r\n        this.$emit('changeStep', step);\r\n      }\r\n    },\r\n    goToMemorial() {\r\n      if(this.$store.getters['auth/isLoggedIn'](['customer'])) {\r\n        this.$router.push({name: 'memorials.edit', params: {id: this.memorial.id}})\r\n      } else {\r\n        this.$router.push({name: 'memorials.show', params: {slug: this.memorial.slug}})\r\n      }\r\n    },\r\n  },\r\n  async mounted() {\r\n    if(this.$store.getters['auth/isLoggedIn'](['customer'])) {\r\n      await this.$store.dispatch('story/getOwnerMemorial', this.$route.params.slug);\r\n    } else {\r\n      await this.$store.dispatch('auth/getToken');\r\n      await this.$store.dispatch('story/getMemorial', this.$route.params.slug);\r\n    }\r\n\r\n    if (!this.isMemorialExist) {\r\n      await this.$router.push({name: 'home'});\r\n    }\r\n\r\n    await this.$store.dispatch('story/getRandomStories', { id: this.memorial.id, count: 3 });\r\n\r\n\r\n    //set share text\r\n    this.form.link = `${window.location.origin}/memorials/${this.memorial.slug}/share`;\r\n\r\n    if(!this.shareText) {\r\n      this.form.text = this.$ml.with('name', this.memorial.name).get('create.memorial.step2.form.input.text');\r\n      await this.$store.dispatch('story/saveShareText', this.form.text);\r\n    } else {\r\n      this.form.text = this.shareText;\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  @import \"~@/assets/scss/pages/create-story.scss\";\r\n  @import '~@/assets/scss/components/form';\r\n  @import '~@/assets/scss/components/create-memorial';\r\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Share.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Share.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Share.vue?vue&type=template&id=36fdb419&\"\nimport script from \"./Share.vue?vue&type=script&lang=js&\"\nexport * from \"./Share.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Share.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <section class=\"story\">\r\n      <component :is=\"step\"\r\n        @changeStep=\"changeStep\"\r\n      ></component>\r\n\r\n    <Sidebar\r\n      :relativeUsers=\"relativeUsers\"\r\n      :step=\"step\"\r\n    />\r\n\r\n    <HelpCenter/>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {mapGetters} from 'vuex';\r\nimport Auth from '@/views/memorials/story/steps/Auth';\r\nimport Create from '@/views/memorials/story/steps/Create';\r\nimport Share from '@/views/memorials/story/steps/Share';\r\nimport HelpCenter from '@/components/HelpCenter.vue';\r\nimport Sidebar from '@/views/memorials/story/partials/Sidebar';\r\n\r\n\r\nexport default {\r\n  name: \"StoryCreate\",\r\n  components: {\r\n    Auth,\r\n    Create,\r\n    Share,\r\n    Sidebar,\r\n    HelpCenter,\r\n  },\r\n  data() {\r\n    return {\r\n      step: 'auth',\r\n    };\r\n  },\r\n  methods: {\r\n    changeStep(step) {\r\n      this.step = step;\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      isMemorialExist: 'story/isMemorialExist',\r\n      memorial: 'story/memorial',\r\n      tokenType: 'auth/tokenType',\r\n    }),\r\n    relativeUsers() {\r\n      const relativeUsers = this.$store.getters['story/relativeUsers'];\r\n\r\n      return  {\r\n        count: relativeUsers.length,\r\n        data: relativeUsers.splice(0, 4),\r\n      };\r\n    },\r\n  },\r\n  async created() {\r\n    switch (this.$route.name) {\r\n      case 'memorials.story.create':\r\n        this.step = 'create';\r\n        break;\r\n      case 'memorials.story.share':\r\n        this.step = 'share';\r\n        break;\r\n      case 'memorials.story.auth':\r\n      default:\r\n        this.step = 'auth';\r\n        break;\r\n    }\r\n\r\n    if(this.$store.getters['auth/isLoggedIn'](['customer'])) {\r\n      await this.$store.dispatch('story/getOwnerMemorial', this.$route.params.slug);\r\n    } else {\r\n      await this.$store.dispatch('story/getMemorial', this.$route.params.slug);\r\n    }\r\n\r\n    if (!this.isMemorialExist) {\r\n      //todo: translate\r\n      alert('Memorial not visible');\r\n      await this.$router.push({name: 'home'});\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  @import \"~@/assets/scss/pages/create-story.scss\";\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=30cc4ed5&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=30cc4ed5&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"30cc4ed5\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/facebook-messenger-1.0f6f9acb.svg\";","module.exports = __webpack_public_path__ + \"img/envelope-blue.d76ae40e.svg\";","const isYouTubeLink = (url) => {\r\n  if(url) {\r\n    const regExp = /^(?:https?:\\/\\/)?(?:m\\.|www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?$/;\r\n\r\n    return !!url.match(regExp);\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nconst parseVideoId = (url) => {\r\n  const regExp = /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#&?]*).*/;\r\n  const match = url.match(regExp);\r\n  return (match && match[7].length === 11) ? match[7] : null;\r\n}\r\n\r\n\r\nexport { isYouTubeLink, parseVideoId };","module.exports = __webpack_public_path__ + \"img/form-photo.0b40d536.svg\";","module.exports = __webpack_public_path__ + \"img/form-paper.5cfa0206.svg\";","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=30cc4ed5&scoped=true&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/facebook.c7033d43.svg\";","module.exports = __webpack_public_path__ + \"img/whatsapp.5dd9d599.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Select.vue?vue&type=style&index=0&id=1a3a35ae&scoped=true&lang=scss&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Share.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}